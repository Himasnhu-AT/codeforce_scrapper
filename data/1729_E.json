{
    "title": "E. Guess the Cycle Size",
    "timeLimit": {
        "value": 1.0,
        "unit": "second"
    },
    "memoryLimit": {
        "value": 256.0,
        "unit": "megabytes"
    },
    "statement": "<p><span class=\"tex-font-style-bf\">This is an interactive problem</span>.</p><p><span class=\"tex-font-style-it\">I want to play a game with you...</span></p><p>We hid from you a cyclic graph of $$$n$$$ vertices ($$$3 \\le n \\le 10^{18}$$$). A cyclic graph is an undirected graph of $$$n$$$ vertices that form one cycle. Each vertex belongs to the cycle, i.e. the length of the cycle (the number of edges in it) is exactly $$$n$$$. The order of the vertices in the cycle is arbitrary.</p><p>You can make queries in the following way:</p><ul><li> \"<span class=\"tex-font-style-tt\">? a b</span>\" where $$$1 \\le a, b \\le 10^{18}$$$ and $$$a \\neq b$$$. In response to the query, the interactor outputs on a separate line the length of random of two paths from vertex $$$a$$$ to vertex $$$b$$$, or <span class=\"tex-font-style-tt\">-1</span> if $$$\\max(a, b) &gt; n$$$. The interactor chooses one of the two paths with <span class=\"tex-font-style-bf\">equal probability</span>. The length of the path\u00a0\u2014is the number of edges in it.</li></ul><p>You win if you guess the number of vertices in the hidden graph (number $$$n$$$) by making no more than $$$50$$$ queries.</p><p>Note that the interactor is implemented in such a way that for any ordered pair $$$(a, b)$$$, it always returns the same value for query \"<span class=\"tex-font-style-tt\">? a b</span>\", no matter how many such queries. Note that the \"<span class=\"tex-font-style-tt\">? b a</span>\" query may be answered differently by the interactor.</p><p>The vertices in the graph are randomly placed, and their positions are fixed in advance.</p><p>Hacks are forbidden in this problem. The number of tests the jury has is $$$50$$$.</p>",
    "inputSpecification": null,
    "outputSpecification": null,
    "samples": [
        {
            "input": "\n\n1\n\n2\n\n-1",
            "output": "\n? 1 2\n\n? 1 3\n\n? 1 4\n\n! 3"
        }
    ],
    "note": "<p>In the first example, the graph could look like this</p><center> <img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/b7cf9de84753f42c1a57e0737594ca63b7b9a4c6.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/> </center><p>The lengths of the simple paths between all pairs of vertices in this case are $$$1$$$ or $$$2$$$. </p><ul> <li> The first query finds out that one of the simple paths from vertex $$$1$$$ to vertex $$$2$$$ has a length of $$$1$$$. </li><li> With the second query, we find out that one of the simple paths from vertex $$$1$$$ to vertex $$$3$$$ has length $$$2$$$. </li><li> In the third query, we find out that vertex $$$4$$$ is not in the graph. Consequently, the size of the graph is $$$3$$$. </li></ul>",
    "contestId": 1729,
    "index": "E",
    "name": "Guess the Cycle Size",
    "type": "PROGRAMMING",
    "tags": [
        "interactive",
        "probabilities"
    ],
    "solvedCount": 6804
}