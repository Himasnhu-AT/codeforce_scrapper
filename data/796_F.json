{
    "title": "F. Sequence Recovery",
    "timeLimit": {
        "value": 2.0,
        "unit": "seconds"
    },
    "memoryLimit": {
        "value": 256.0,
        "unit": "megabytes"
    },
    "statement": "<p>Zane once had a <span class=\"tex-font-style-it\">good</span> sequence <span class=\"tex-span\"><i>a</i></span> consisting of <span class=\"tex-span\"><i>n</i></span> integers <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\">1</sub>,\u2009<i>a</i><sub class=\"lower-index\">2</sub>,\u2009...,\u2009<i>a</i><sub class=\"lower-index\"><i>n</i></sub></span>\u00a0\u2014 but he has lost it.</p><p>A sequence is said to be <span class=\"tex-font-style-it\">good</span> if and only if all of its integers are non-negative and do not exceed <span class=\"tex-span\">10<sup class=\"upper-index\">9</sup></span> in value.</p><center> <img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/6a6ab866d48027afac3419006eb00065878dc4e6.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/> </center><p>However, Zane remembers having played around with his sequence by applying <span class=\"tex-span\"><i>m</i></span> operations to it.</p><p>There are two types of operations:</p><p>1. Find the maximum value of integers with indices <span class=\"tex-span\"><i>i</i></span> such that <span class=\"tex-span\"><i>l</i>\u2009\u2264\u2009<i>i</i>\u2009\u2264\u2009<i>r</i></span>, given <span class=\"tex-span\"><i>l</i></span> and <span class=\"tex-span\"><i>r</i></span>.</p><p>2. Assign <span class=\"tex-span\"><i>d</i></span> as the value of the integer with index <span class=\"tex-span\"><i>k</i></span>, given <span class=\"tex-span\"><i>k</i></span> and <span class=\"tex-span\"><i>d</i></span>.</p><p>After he finished playing, he restored his sequence to the state it was before any operations were applied. That is, sequence <span class=\"tex-span\"><i>a</i></span> was no longer affected by the applied type 2 operations. Then, he lost his sequence at some time between now and then.</p><p>Fortunately, Zane remembers all the operations and the order he applied them to his sequence, along with the <span class=\"tex-font-style-bf\">distinct</span> results of all type 1 operations. Moreover, among all <span class=\"tex-font-style-it\">good</span> sequences that would produce the same results when the same operations are applied in the same order, he knows that his sequence <span class=\"tex-span\"><i>a</i></span> has the greatest <span class=\"tex-font-style-it\">cuteness</span>.</p><p>We define <span class=\"tex-font-style-it\">cuteness</span> of a sequence as the bitwise OR result of all integers in such sequence. For example, the <span class=\"tex-font-style-it\">cuteness</span> of Zane's sequence <span class=\"tex-span\"><i>a</i></span> is <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\">1</sub></span> <span class=\"tex-font-style-tt\">OR</span> <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\">2</sub></span> <span class=\"tex-font-style-tt\">OR</span> ... <span class=\"tex-font-style-tt\">OR</span> <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>n</i></sub></span>.</p><p>Zane understands that it might not be possible to recover exactly the lost sequence given his information, so he would be happy to get any <span class=\"tex-font-style-it\">good</span> sequence <span class=\"tex-span\"><i>b</i></span> consisting of <span class=\"tex-span\"><i>n</i></span> integers <span class=\"tex-span\"><i>b</i><sub class=\"lower-index\">1</sub>,\u2009<i>b</i><sub class=\"lower-index\">2</sub>,\u2009...,\u2009<i>b</i><sub class=\"lower-index\"><i>n</i></sub></span> that:</p><p>1. would give the same results when the same operations are applied in the same order, and</p><p>2. has the same <span class=\"tex-font-style-it\">cuteness</span> as that of Zane's original sequence <span class=\"tex-span\"><i>a</i></span>.</p><p>If there is such a sequence, find it. Otherwise, it means that Zane must have remembered something incorrectly, which is possible.</p>",
    "inputSpecification": "<p>The first line contains two integers <span class=\"tex-span\"><i>n</i></span> and <span class=\"tex-span\"><i>m</i></span> (<span class=\"tex-span\">1\u2009\u2264\u2009<i>n</i>,\u2009<i>m</i>\u2009\u2264\u20093\u00b710<sup class=\"upper-index\">5</sup></span>)\u00a0\u2014 the number of integers in Zane's original sequence and the number of operations that have been applied to the sequence, respectively.</p><p>The <span class=\"tex-span\"><i>i</i></span>-th of the following <span class=\"tex-span\"><i>m</i></span> lines starts with one integer <span class=\"tex-span\"><i>t</i><sub class=\"lower-index\"><i>i</i></sub></span> (<img align=\"middle\" class=\"tex-formula\" src=\"https://espresso.codeforces.com/4c7c768da8395489b31f8f3db90a6fe799bdeb0f.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/>)\u00a0\u2014 the type of the <span class=\"tex-span\"><i>i</i></span>-th operation.</p><p>If the operation is type 1 (<span class=\"tex-span\"><i>t</i><sub class=\"lower-index\"><i>i</i></sub>\u2009=\u20091</span>), then three integers <span class=\"tex-span\"><i>l</i><sub class=\"lower-index\"><i>i</i></sub></span>, <span class=\"tex-span\"><i>r</i><sub class=\"lower-index\"><i>i</i></sub></span>, and <span class=\"tex-span\"><i>x</i><sub class=\"lower-index\"><i>i</i></sub></span> follow (<span class=\"tex-span\">1\u2009\u2264\u2009<i>l</i><sub class=\"lower-index\"><i>i</i></sub>\u2009\u2264\u2009<i>r</i><sub class=\"lower-index\"><i>i</i></sub>\u2009\u2264\u2009<i>n</i></span>, <span class=\"tex-span\">0\u2009\u2264\u2009<i>x</i><sub class=\"lower-index\"><i>i</i></sub>\u2009\u2264\u200910<sup class=\"upper-index\">9</sup></span>)\u00a0\u2014 the leftmost index to be considered, the rightmost index to be considered, and the maximum value of all integers with indices between <span class=\"tex-span\"><i>l</i><sub class=\"lower-index\"><i>i</i></sub></span> and <span class=\"tex-span\"><i>r</i><sub class=\"lower-index\"><i>i</i></sub></span>, inclusive, respectively.</p><p>If the operation is type 2 (<span class=\"tex-span\"><i>t</i><sub class=\"lower-index\"><i>i</i></sub>\u2009=\u20092</span>), then two integers <span class=\"tex-span\"><i>k</i><sub class=\"lower-index\"><i>i</i></sub></span> and <span class=\"tex-span\"><i>d</i><sub class=\"lower-index\"><i>i</i></sub></span> follow (<span class=\"tex-span\">1\u2009\u2264\u2009<i>k</i><sub class=\"lower-index\"><i>i</i></sub>\u2009\u2264\u2009<i>n</i></span>, <span class=\"tex-span\">0\u2009\u2264\u2009<i>d</i><sub class=\"lower-index\"><i>i</i></sub>\u2009\u2264\u200910<sup class=\"upper-index\">9</sup></span>)\u00a0\u2014 meaning that the integer with index <span class=\"tex-span\"><i>k</i><sub class=\"lower-index\"><i>i</i></sub></span> should become <span class=\"tex-span\"><i>d</i><sub class=\"lower-index\"><i>i</i></sub></span> after this operation.</p><p>It is guaranteed that <span class=\"tex-span\"><i>x</i><sub class=\"lower-index\"><i>i</i></sub>\u2009\u2260\u2009<i>x</i><sub class=\"lower-index\"><i>j</i></sub></span> for all pairs <span class=\"tex-span\">(<i>i</i>,\u2009<i>j</i>)</span> where <span class=\"tex-span\">1\u2009\u2264\u2009<i>i</i>\u2009&lt;\u2009<i>j</i>\u2009\u2264\u2009<i>m</i></span> and <span class=\"tex-span\"><i>t</i><sub class=\"lower-index\"><i>i</i></sub>\u2009=\u2009<i>t</i><sub class=\"lower-index\"><i>j</i></sub>\u2009=\u20091</span>.</p><p>The operations are given in the same order they were applied. That is, the operation that is given first was applied first, the operation that is given second was applied second, and so on.</p>",
    "outputSpecification": "<p>If there does not exist a valid <span class=\"tex-font-style-it\">good</span> sequence, print \"<span class=\"tex-font-style-tt\">NO</span>\" (without quotation marks) in the first line.</p><p>Otherwise, print \"<span class=\"tex-font-style-tt\">YES</span>\" (without quotation marks) in the first line, and print <span class=\"tex-span\"><i>n</i></span> space-separated integers <span class=\"tex-span\"><i>b</i><sub class=\"lower-index\">1</sub>,\u2009<i>b</i><sub class=\"lower-index\">2</sub>,\u2009...,\u2009<i>b</i><sub class=\"lower-index\"><i>n</i></sub></span> (<span class=\"tex-span\">0\u2009\u2264\u2009<i>b</i><sub class=\"lower-index\"><i>i</i></sub>\u2009\u2264\u200910<sup class=\"upper-index\">9</sup></span>) in the second line.</p><p>If there are multiple answers, print any of them.</p>",
    "samples": [
        {
            "input": "5 4<br/>1 1 5 19<br/>1 2 5 1<br/>2 5 100<br/>1 1 5 100<br/>",
            "output": "YES<br/>19 0 0 0 1<br/>"
        },
        {
            "input": "5 2<br/>1 1 5 0<br/>1 1 5 100<br/>",
            "output": "NO"
        }
    ],
    "note": "<p>In the first sample, it is easy to verify that this <span class=\"tex-font-style-it\">good</span> sequence is valid. In particular, its <span class=\"tex-font-style-it\">cuteness</span> is <span class=\"tex-span\">19</span> <span class=\"tex-font-style-tt\">OR</span> <span class=\"tex-span\">0</span> <span class=\"tex-font-style-tt\">OR</span> <span class=\"tex-span\">0</span> <span class=\"tex-font-style-tt\">OR</span> <span class=\"tex-span\">0</span> <span class=\"tex-font-style-tt\">OR</span> <span class=\"tex-span\">1</span> <span class=\"tex-span\">\u2009=\u2009</span> <span class=\"tex-span\">19</span>.</p><p>In the second sample, the two operations clearly contradict, so there is no such <span class=\"tex-font-style-it\">good</span> sequence.</p>",
    "contestId": 796,
    "index": "F",
    "name": "Sequence Recovery",
    "type": "PROGRAMMING",
    "tags": [
        "bitmasks",
        "data structures",
        "greedy"
    ],
    "solvedCount": 172
}