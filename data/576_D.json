{
    "title": "D. Flights for Regular Customers",
    "timeLimit": {
        "value": 4.0,
        "unit": "seconds"
    },
    "memoryLimit": {
        "value": 256.0,
        "unit": "megabytes"
    },
    "statement": "<p>In the country there are exactly <span class=\"tex-span\"><i>n</i></span> cities numbered with positive integers from <span class=\"tex-span\">1</span> to <span class=\"tex-span\"><i>n</i></span>. In each city there is an airport is located.</p><p>Also, there is the only one airline, which makes <span class=\"tex-span\"><i>m</i></span> flights. Unfortunately, to use them, you need to be a regular customer of this company, namely, you have the opportunity to enjoy flight <span class=\"tex-span\"><i>i</i></span> from city <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i></sub></span> to city <span class=\"tex-span\"><i>b</i><sub class=\"lower-index\"><i>i</i></sub></span> only if you have already made at least <span class=\"tex-span\"><i>d</i><sub class=\"lower-index\"><i>i</i></sub></span> flights before that.</p><p>Please note that flight <span class=\"tex-span\"><i>i</i></span> flies exactly from city <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i></sub></span> to city <span class=\"tex-span\"><i>b</i><sub class=\"lower-index\"><i>i</i></sub></span>. It can not be used to fly from city <span class=\"tex-span\"><i>b</i><sub class=\"lower-index\"><i>i</i></sub></span> to city <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i></sub></span>. An interesting fact is that there may possibly be recreational flights with a beautiful view of the sky, which begin and end in the same city.</p><p>You need to get from city <span class=\"tex-span\">1</span> to city <span class=\"tex-span\"><i>n</i></span>. Unfortunately, you've never traveled by plane before. What minimum number of flights you have to perform in order to get to city <span class=\"tex-span\"><i>n</i></span>?</p><p>Note that the same flight can be used multiple times.</p>",
    "inputSpecification": "<p>The first line contains two integers, <span class=\"tex-span\"><i>n</i></span> and <span class=\"tex-span\"><i>m</i></span> (<span class=\"tex-span\">2\u2009\u2264\u2009<i>n</i>\u2009\u2264\u2009150</span>, <span class=\"tex-span\">1\u2009\u2264\u2009<i>m</i>\u2009\u2264\u2009150</span>) \u2014 the number of cities in the country and the number of flights the company provides.</p><p>Next <span class=\"tex-span\"><i>m</i></span> lines contain numbers <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i></sub></span>, <span class=\"tex-span\"><i>b</i><sub class=\"lower-index\"><i>i</i></sub></span>, <span class=\"tex-span\"><i>d</i><sub class=\"lower-index\"><i>i</i></sub></span> (<span class=\"tex-span\">1\u2009\u2264\u2009<i>a</i><sub class=\"lower-index\"><i>i</i></sub>,\u2009<i>b</i><sub class=\"lower-index\"><i>i</i></sub>\u2009\u2264\u2009<i>n</i></span>, <span class=\"tex-span\">0\u2009\u2264\u2009<i>d</i><sub class=\"lower-index\"><i>i</i></sub>\u2009\u2264\u200910<sup class=\"upper-index\">9</sup></span>), representing flight number <span class=\"tex-span\"><i>i</i></span> from city <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i></sub></span> to city <span class=\"tex-span\"><i>b</i><sub class=\"lower-index\"><i>i</i></sub></span>, accessible to only the clients who have made at least <span class=\"tex-span\"><i>d</i><sub class=\"lower-index\"><i>i</i></sub></span> flights. </p>",
    "outputSpecification": "<p>Print \"<span class=\"tex-font-style-tt\">Impossible</span>\" (without the quotes), if it is impossible to get from city <span class=\"tex-span\">1</span> to city <span class=\"tex-span\"><i>n</i></span> using the airways.</p><p>But if there is at least one way, print a single integer \u2014 the minimum number of flights you need to make to get to the destination point.</p>",
    "samples": [
        {
            "input": "3 2<br/>1 2 0<br/>2 3 1<br/>",
            "output": "2<br/>"
        },
        {
            "input": "2 1<br/>1 2 100500<br/>",
            "output": "Impossible<br/>"
        },
        {
            "input": "3 3<br/>2 1 0<br/>2 3 6<br/>1 2 0<br/>",
            "output": "8<br/>"
        }
    ],
    "note": null,
    "contestId": 576,
    "index": "D",
    "name": "Flights for Regular Customers",
    "type": "PROGRAMMING",
    "tags": [
        "dp",
        "matrices"
    ],
    "solvedCount": 1314
}