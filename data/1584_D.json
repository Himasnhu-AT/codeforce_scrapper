{
    "title": "D. Guess the Permutation",
    "timeLimit": {
        "value": 1.0,
        "unit": "second"
    },
    "memoryLimit": {
        "value": 256.0,
        "unit": "megabytes"
    },
    "statement": "<p><span class=\"tex-font-style-bf\">This is an interactive problem.</span></p><p>Jury initially had a sequence $$$a$$$ of length $$$n$$$, such that $$$a_i = i$$$.</p><p>The jury chose three integers $$$i$$$, $$$j$$$, $$$k$$$, such that $$$1 \\leq i &lt; j &lt; k \\leq n$$$, $$$j - i &gt; 1$$$. After that, Jury reversed subsegments $$$[i, j - 1]$$$ and $$$[j, k]$$$ of the sequence $$$a$$$.</p><p>Reversing a subsegment $$$[l, r]$$$ of the sequence $$$a$$$ means reversing the order of elements $$$a_l, a_{l+1}, \\ldots, a_r$$$ in the sequence, i.\u00a0e. $$$a_l$$$ is swapped with $$$a_r$$$, $$$a_{l+1}$$$ is swapped with $$$a_{r-1}$$$, etc.</p><p>You are given the number $$$n$$$ and you should find $$$i$$$, $$$j$$$, $$$k$$$ after asking some questions.</p><p>In one question you can choose two integers $$$l$$$ and $$$r$$$ ($$$1 \\leq l \\leq r \\leq n$$$) and ask the number of inversions on the subsegment $$$[l, r]$$$ of the sequence $$$a$$$. You will be given the number of pairs $$$(i, j)$$$ such that $$$l \\leq i &lt; j \\leq r$$$, and $$$a_i &gt; a_j$$$.</p><p>Find the chosen numbers $$$i$$$, $$$j$$$, $$$k$$$ after at most $$$40$$$ questions.</p><p>The numbers $$$i$$$, $$$j$$$, and $$$k$$$ are fixed before the start of your program and do not depend on your queries.</p>",
    "inputSpecification": "<p>Each test consists of multiple test cases. The first line contains a single integer $$$t$$$ ($$$1 \\leq t \\leq 100$$$) \u2014 the number of test cases. Description of the test cases follows.</p><p>The single line of each test case contains a single integer $$$n$$$ ($$$4 \\leq n \\leq 10^9$$$). After reading it you should start an interaction process by asking questions for that test case. After giving an answer you should:</p><ul> <li> Terminate your program if that is the last test case. </li><li> Proceed to the next test case otherwise. </li></ul>",
    "outputSpecification": null,
    "samples": [
        {
            "input": "\n2 \n5 \n\n4 \n\n3 \n\n3 \n\n5 \n\n2 \n\n2 \n\n1 ",
            "output": "\n\n\n? 1 5\n\n? 2 5\n\n? 3 5\n\n! 1 3 5\n\n? 1 5\n\n? 2 5\n\n? 3 5\n\n! 2 4 5"
        }
    ],
    "note": "<p>In the first test case, $$$i = 1$$$, $$$j = 3$$$, $$$k = 5$$$, so the sequence $$$a$$$ is $$$[2, 1, 5, 4, 3]$$$.</p><p>In the second test case, $$$i = 2$$$, $$$j = 4$$$, $$$k = 5$$$, so the sequence $$$a$$$ is $$$[1, 3, 2, 5, 4]$$$.</p>",
    "contestId": 1584,
    "index": "D",
    "name": "Guess the Permutation",
    "type": "PROGRAMMING",
    "tags": [
        "binary search",
        "combinatorics",
        "interactive",
        "math"
    ],
    "solvedCount": 3579
}