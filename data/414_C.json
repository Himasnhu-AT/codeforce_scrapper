{
    "title": "C. Mashmokh and Reverse Operation",
    "timeLimit": {
        "value": 4.0,
        "unit": "seconds"
    },
    "memoryLimit": {
        "value": 512.0,
        "unit": "megabytes"
    },
    "statement": "<p><span class=\"tex-font-style-it\">Mashmokh's boss, Bimokh, didn't like Mashmokh. So he fired him. Mashmokh decided to go to university and participate in ACM instead of finding a new job. He wants to become a member of Bamokh's team. In order to join he was given some programming tasks and one week to solve them. Mashmokh is not a very experienced programmer. Actually he is not a programmer at all. So he wasn't able to solve them. That's why he asked you to help him with these tasks. One of these tasks is the following.</span></p><p>You have an array <span class=\"tex-span\"><i>a</i></span> of length <span class=\"tex-span\">2<sup class=\"upper-index\"><i>n</i></sup></span> and <span class=\"tex-span\"><i>m</i></span> queries on it. The <span class=\"tex-span\"><i>i</i></span>-th query is described by an integer <span class=\"tex-span\"><i>q</i><sub class=\"lower-index\"><i>i</i></sub></span>. In order to perform the <span class=\"tex-span\"><i>i</i></span>-th query you must:</p><ul> <li> split the array into <span class=\"tex-span\">2<sup class=\"upper-index\"><i>n</i>\u2009-\u2009<i>q</i><sub class=\"lower-index\"><i>i</i></sub></sup></span> parts, where each part is a subarray consisting of <span class=\"tex-span\">2<sup class=\"upper-index\"><i>q</i><sub class=\"lower-index\"><i>i</i></sub></sup></span> numbers; the <span class=\"tex-span\"><i>j</i></span>-th subarray <span class=\"tex-span\">(1\u2009\u2264\u2009<i>j</i>\u2009\u2264\u20092<sup class=\"upper-index\"><i>n</i>\u2009-\u2009<i>q</i><sub class=\"lower-index\"><i>i</i></sub></sup>)</span> should contain the elements <span class=\"tex-span\"><i>a</i>[(<i>j</i>\u2009-\u20091)\u00b72<sup class=\"upper-index\"><i>q</i><sub class=\"lower-index\"><i>i</i></sub></sup>\u2009+\u20091],\u2009<i>a</i>[(<i>j</i>\u2009-\u20091)\u00b72<sup class=\"upper-index\"><i>q</i><sub class=\"lower-index\"><i>i</i></sub></sup>\u2009+\u20092],\u2009...,\u2009<i>a</i>[(<i>j</i>\u2009-\u20091)\u00b72<sup class=\"upper-index\"><i>q</i><sub class=\"lower-index\"><i>i</i></sub></sup>\u2009+\u20092<sup class=\"upper-index\"><i>q</i><sub class=\"lower-index\"><i>i</i></sub></sup>]</span>; </li><li> reverse each of the subarrays; </li><li> join them into a single array in the same order (this array becomes new array <span class=\"tex-span\"><i>a</i></span>); </li><li> output the number of inversions in the new <span class=\"tex-span\"><i>a</i></span>. </li></ul><p>Given initial array <span class=\"tex-span\"><i>a</i></span> and all the queries. Answer all the queries. Please, note that the changes from some query is saved for further queries.</p>",
    "inputSpecification": "<p>The first line of input contains a single integer <span class=\"tex-span\"><i>n</i>\u00a0(0\u2009\u2264\u2009<i>n</i>\u2009\u2264\u200920)</span>. </p><p>The second line of input contains <span class=\"tex-span\">2<sup class=\"upper-index\"><i>n</i></sup></span> space-separated integers <span class=\"tex-span\"><i>a</i>[1],\u2009<i>a</i>[2],\u2009...,\u2009<i>a</i>[2<sup class=\"upper-index\"><i>n</i></sup>]\u00a0(1\u2009\u2264\u2009<i>a</i>[<i>i</i>]\u2009\u2264\u200910<sup class=\"upper-index\">9</sup>)</span>, the initial array.</p><p>The third line of input contains a single integer <span class=\"tex-span\"><i>m</i>\u00a0(1\u2009\u2264\u2009<i>m</i>\u2009\u2264\u200910<sup class=\"upper-index\">6</sup>)</span>. </p><p>The fourth line of input contains <span class=\"tex-span\"><i>m</i></span> space-separated integers <span class=\"tex-span\"><i>q</i><sub class=\"lower-index\">1</sub>,\u2009<i>q</i><sub class=\"lower-index\">2</sub>,\u2009...,\u2009<i>q</i><sub class=\"lower-index\"><i>m</i></sub>\u00a0(0\u2009\u2264\u2009<i>q</i><sub class=\"lower-index\"><i>i</i></sub>\u2009\u2264\u2009<i>n</i>)</span>, the queries.</p><p><span class=\"tex-font-style-bf\">Note</span>: since the size of the input and output could be very large, don't use slow output techniques in your language. For example, do not use input and output streams (cin, cout) in C++.</p>",
    "outputSpecification": "<p>Output <span class=\"tex-span\"><i>m</i></span> lines. In the <span class=\"tex-span\"><i>i</i></span>-th line print the answer (the number of inversions) for the <span class=\"tex-span\"><i>i</i></span>-th query.</p>",
    "samples": [
        {
            "input": "2<br/>2 1 4 3<br/>4<br/>1 2 0 2<br/>",
            "output": "0<br/>6<br/>6<br/>0<br/>"
        },
        {
            "input": "1<br/>1 2<br/>3<br/>0 1 1<br/>",
            "output": "0<br/>1<br/>0<br/>"
        }
    ],
    "note": "<p>If we reverse an array <span class=\"tex-span\"><i>x</i>[1],\u2009<i>x</i>[2],\u2009...,\u2009<i>x</i>[<i>n</i>]</span> it becomes new array <span class=\"tex-span\"><i>y</i>[1],\u2009<i>y</i>[2],\u2009...,\u2009<i>y</i>[<i>n</i>]</span>, where <span class=\"tex-span\"><i>y</i>[<i>i</i>]\u2009=\u2009<i>x</i>[<i>n</i>\u2009-\u2009<i>i</i>\u2009+\u20091]</span> for each <span class=\"tex-span\"><i>i</i></span>.</p><p>The number of inversions of an array <span class=\"tex-span\"><i>x</i>[1],\u2009<i>x</i>[2],\u2009...,\u2009<i>x</i>[<i>n</i>]</span> is the number of pairs of indices <span class=\"tex-span\"><i>i</i>,\u2009<i>j</i></span> such that: <span class=\"tex-span\"><i>i</i>\u2009&lt;\u2009<i>j</i></span> and <span class=\"tex-span\"><i>x</i>[<i>i</i>]\u2009&gt;\u2009<i>x</i>[<i>j</i>]</span>.</p>",
    "contestId": 414,
    "index": "C",
    "name": "Mashmokh and Reverse Operation",
    "type": "PROGRAMMING",
    "tags": [
        "combinatorics",
        "divide and conquer"
    ],
    "solvedCount": 2183
}