{
    "title": "E. Drawing Circles is Fun",
    "timeLimit": {
        "value": 3.0,
        "unit": "seconds"
    },
    "memoryLimit": {
        "value": 256.0,
        "unit": "megabytes"
    },
    "statement": "<p>There are a set of points <span class=\"tex-span\"><i>S</i></span> on the plane. This set doesn't contain the origin <span class=\"tex-span\"><i>O</i>(0,\u20090)</span>, and for each two distinct points in the set <span class=\"tex-span\"><i>A</i></span> and <span class=\"tex-span\"><i>B</i></span>, the triangle <span class=\"tex-span\"><i>OAB</i></span> has strictly positive area.</p><p>Consider a set of pairs of points <span class=\"tex-span\">(<i>P</i><sub class=\"lower-index\">1</sub>,\u2009<i>P</i><sub class=\"lower-index\">2</sub>),\u2009(<i>P</i><sub class=\"lower-index\">3</sub>,\u2009<i>P</i><sub class=\"lower-index\">4</sub>),\u2009...,\u2009(<i>P</i><sub class=\"lower-index\">2<i>k</i>\u2009-\u20091</sub>,\u2009<i>P</i><sub class=\"lower-index\">2<i>k</i></sub>)</span>. We'll call the set <span class=\"tex-font-style-it\">good</span> if and only if:</p><ul> <li> <span class=\"tex-span\"><i>k</i>\u2009\u2265\u20092</span>. </li><li> All <span class=\"tex-span\"><i>P</i><sub class=\"lower-index\"><i>i</i></sub></span> are distinct, and each <span class=\"tex-span\"><i>P</i><sub class=\"lower-index\"><i>i</i></sub></span> is an element of <span class=\"tex-span\"><i>S</i></span>. </li><li> For any two pairs <span class=\"tex-span\">(<i>P</i><sub class=\"lower-index\">2<i>i</i>\u2009-\u20091</sub>,\u2009<i>P</i><sub class=\"lower-index\">2<i>i</i></sub>)</span> and <span class=\"tex-span\">(<i>P</i><sub class=\"lower-index\">2<i>j</i>\u2009-\u20091</sub>,\u2009<i>P</i><sub class=\"lower-index\">2<i>j</i></sub>)</span>, the circumcircles of triangles <span class=\"tex-span\"><i>OP</i><sub class=\"lower-index\">2<i>i</i>\u2009-\u20091</sub><i>P</i><sub class=\"lower-index\">2<i>j</i>\u2009-\u20091</sub></span> and <span class=\"tex-span\"><i>OP</i><sub class=\"lower-index\">2<i>i</i></sub><i>P</i><sub class=\"lower-index\">2<i>j</i></sub></span> have a single common point, and the circumcircle of triangles <span class=\"tex-span\"><i>OP</i><sub class=\"lower-index\">2<i>i</i>\u2009-\u20091</sub><i>P</i><sub class=\"lower-index\">2<i>j</i></sub></span> and <span class=\"tex-span\"><i>OP</i><sub class=\"lower-index\">2<i>i</i></sub><i>P</i><sub class=\"lower-index\">2<i>j</i>\u2009-\u20091</sub></span> have a single common point. </li></ul><p>Calculate the number of good sets of pairs modulo <span class=\"tex-span\">1000000007</span> <span class=\"tex-span\">(10<sup class=\"upper-index\">9</sup>\u2009+\u20097)</span>.</p>",
    "inputSpecification": "<p>The first line contains a single integer <span class=\"tex-span\"><i>n</i></span> <span class=\"tex-span\">(1\u2009\u2264\u2009<i>n</i>\u2009\u2264\u20091000)</span> \u2014 the number of points in <span class=\"tex-span\"><i>S</i></span>. Each of the next <span class=\"tex-span\"><i>n</i></span> lines contains four integers <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i></sub>,\u2009<i>b</i><sub class=\"lower-index\"><i>i</i></sub>,\u2009<i>c</i><sub class=\"lower-index\"><i>i</i></sub>,\u2009<i>d</i><sub class=\"lower-index\"><i>i</i></sub></span> <span class=\"tex-span\">(0\u2009\u2264\u2009|<i>a</i><sub class=\"lower-index\"><i>i</i></sub>|,\u2009|<i>c</i><sub class=\"lower-index\"><i>i</i></sub>|\u2009\u2264\u200950;\u00a01\u2009\u2264\u2009<i>b</i><sub class=\"lower-index\"><i>i</i></sub>,\u2009<i>d</i><sub class=\"lower-index\"><i>i</i></sub>\u2009\u2264\u200950;\u00a0(<i>a</i><sub class=\"lower-index\"><i>i</i></sub>,\u2009<i>c</i><sub class=\"lower-index\"><i>i</i></sub>)\u2009\u2260\u2009(0,\u20090))</span>. These integers represent a point <img align=\"middle\" class=\"tex-formula\" src=\"https://espresso.codeforces.com/eb0ead1a6138beb1ef687d910311920c2d9818fc.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/>.</p><p>No two points coincide.</p>",
    "outputSpecification": "<p>Print a single integer \u2014 the answer to the problem modulo <span class=\"tex-span\">1000000007</span> <span class=\"tex-span\">(10<sup class=\"upper-index\">9</sup>\u2009+\u20097)</span>.</p>",
    "samples": [
        {
            "input": "10<br/>-46 46 0 36<br/>0 20 -24 48<br/>-50 50 -49 49<br/>-20 50 8 40<br/>-15 30 14 28<br/>4 10 -4 5<br/>6 15 8 10<br/>-20 50 -3 15<br/>4 34 -16 34<br/>16 34 2 17<br/>",
            "output": "2<br/>"
        },
        {
            "input": "10<br/>30 30 -26 26<br/>0 15 -36 36<br/>-28 28 -34 34<br/>10 10 0 4<br/>-8 20 40 50<br/>9 45 12 30<br/>6 15 7 35<br/>36 45 -8 20<br/>-16 34 -4 34<br/>4 34 8 17<br/>",
            "output": "4<br/>"
        },
        {
            "input": "10<br/>0 20 38 38<br/>-30 30 -13 13<br/>-11 11 16 16<br/>30 30 0 37<br/>6 30 -4 10<br/>6 15 12 15<br/>-4 5 -10 25<br/>-16 20 4 10<br/>8 17 -2 17<br/>16 34 2 17<br/>",
            "output": "10<br/>"
        }
    ],
    "note": null,
    "contestId": 372,
    "index": "E",
    "name": "Drawing Circles is Fun",
    "type": "PROGRAMMING",
    "tags": [
        "combinatorics",
        "geometry"
    ],
    "solvedCount": 170
}