{
    "title": "B. Sleepy Game",
    "timeLimit": {
        "value": 2.0,
        "unit": "seconds"
    },
    "memoryLimit": {
        "value": 256.0,
        "unit": "megabytes"
    },
    "statement": "<p>Petya and Vasya arranged a game. The game runs by the following rules. Players have a directed graph consisting of <span class=\"tex-span\"><i>n</i></span> vertices and <span class=\"tex-span\"><i>m</i></span> edges. One of the vertices contains a chip. Initially the chip is located at vertex <span class=\"tex-span\"><i>s</i></span>. Players take turns moving the chip along some edge of the graph. Petya goes first. Player who can't move the chip loses. If the game lasts for <span class=\"tex-span\">10<sup class=\"upper-index\">6</sup></span> turns the draw is announced.</p><p>Vasya was performing big laboratory work in \"Spelling and parts of speech\" at night before the game, so he fell asleep at the very beginning of the game. Petya decided to take the advantage of this situation and make both Petya's and Vasya's moves.</p><p>Your task is to help Petya find out if he can win the game or at least draw a tie.</p>",
    "inputSpecification": "<p>The first line of input contain two integers <span class=\"tex-span\"><i>n</i></span> and <span class=\"tex-span\"><i>m</i></span>\u00a0\u2014 the number of vertices and the number of edges in the graph (<span class=\"tex-span\">2\u2009\u2264\u2009<i>n</i>\u2009\u2264\u200910<sup class=\"upper-index\">5</sup></span>, <span class=\"tex-span\">0\u2009\u2264\u2009<i>m</i>\u2009\u2264\u20092\u00b710<sup class=\"upper-index\">5</sup></span>).</p><p>The next <span class=\"tex-span\"><i>n</i></span> lines contain the information about edges of the graph. <span class=\"tex-span\"><i>i</i></span>-th line (<span class=\"tex-span\">1\u2009\u2264\u2009<i>i</i>\u2009\u2264\u2009<i>n</i></span>) contains nonnegative integer <span class=\"tex-span\"><i>c</i><sub class=\"lower-index\"><i>i</i></sub></span>\u00a0\u2014 number of vertices such that there is an edge from <span class=\"tex-span\"><i>i</i></span> to these vertices and <span class=\"tex-span\"><i>c</i><sub class=\"lower-index\"><i>i</i></sub></span> distinct integers <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i>,\u2009<i>j</i></sub></span>\u00a0\u2014 indices of these vertices (<span class=\"tex-span\">1\u2009\u2264\u2009<i>a</i><sub class=\"lower-index\"><i>i</i>,\u2009<i>j</i></sub>\u2009\u2264\u2009<i>n</i></span>, <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i>,\u2009<i>j</i></sub>\u2009\u2260\u2009<i>i</i></span>).</p><p>It is guaranteed that the total sum of <span class=\"tex-span\"><i>c</i><sub class=\"lower-index\"><i>i</i></sub></span> equals to <span class=\"tex-span\"><i>m</i></span>.</p><p>The next line contains index of vertex <span class=\"tex-span\"><i>s</i></span>\u00a0\u2014 the initial position of the chip (<span class=\"tex-span\">1\u2009\u2264\u2009<i>s</i>\u2009\u2264\u2009<i>n</i></span>).</p>",
    "outputSpecification": "<p>If Petya can win print \u00ab<span class=\"tex-font-style-tt\">Win</span>\u00bb in the first line. In the next line print numbers <span class=\"tex-span\"><i>v</i><sub class=\"lower-index\">1</sub>,\u2009<i>v</i><sub class=\"lower-index\">2</sub>,\u2009...,\u2009<i>v</i><sub class=\"lower-index\"><i>k</i></sub></span> (<span class=\"tex-span\">1\u2009\u2264\u2009<i>k</i>\u2009\u2264\u200910<sup class=\"upper-index\">6</sup></span>)\u00a0\u2014 the sequence of vertices Petya should visit for the winning. Vertex <span class=\"tex-span\"><i>v</i><sub class=\"lower-index\">1</sub></span> should coincide with <span class=\"tex-span\"><i>s</i></span>. For <span class=\"tex-span\"><i>i</i>\u2009=\u20091... <i>k</i>\u2009-\u20091</span> there should be an edge from <span class=\"tex-span\"><i>v</i><sub class=\"lower-index\"><i>i</i></sub></span> to <span class=\"tex-span\"><i>v</i><sub class=\"lower-index\"><i>i</i>\u2009+\u20091</sub></span> in the graph. There must be no possible move from vertex <span class=\"tex-span\"><i>v</i><sub class=\"lower-index\"><i>k</i></sub></span>. The sequence should be such that Petya wins the game.</p><p>If Petya can't win but can draw a tie, print \u00ab<span class=\"tex-font-style-tt\">Draw</span>\u00bb in the only line. Otherwise print \u00ab<span class=\"tex-font-style-tt\">Lose</span>\u00bb.</p>",
    "samples": [
        {
            "input": "5 6<br/>2 2 3<br/>2 4 5<br/>1 4<br/>1 5<br/>0<br/>1<br/>",
            "output": "Win<br/>1 2 4 5 <br/>"
        },
        {
            "input": "3 2<br/>1 3<br/>1 1<br/>0<br/>2<br/>",
            "output": "Lose<br/>"
        },
        {
            "input": "2 2<br/>1 2<br/>1 1<br/>1<br/>",
            "output": "Draw<br/>"
        }
    ],
    "note": "<p>In the first example the graph is the following:</p><center> <img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/7cc423f0c806f524057e08a51d026a5c075d99d6.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/> </center><p>Initially the chip is located at vertex <span class=\"tex-span\">1</span>. In the first move Petya moves the chip to vertex <span class=\"tex-span\">2</span>, after that he moves it to vertex <span class=\"tex-span\">4</span> for Vasya. After that he moves to vertex <span class=\"tex-span\">5</span>. Now it is Vasya's turn and there is no possible move, so Petya wins.</p><p>In the second example the graph is the following:</p><center> <img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/a30167a45fffed1c28046acf83e9c9d5c4a9d0d6.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/> </center><p>Initially the chip is located at vertex <span class=\"tex-span\">2</span>. The only possible Petya's move is to go to vertex <span class=\"tex-span\">1</span>. After that he has to go to <span class=\"tex-span\">3</span> for Vasya. Now it's Petya's turn but he has no possible move, so Petya loses.</p><p>In the third example the graph is the following:</p><center> <img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/fe77a14b4c6ee331d34697f77d29004bbc63efb2.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/> </center><p>Petya can't win, but he can move along the cycle, so the players will draw a tie.</p>",
    "contestId": 936,
    "index": "B",
    "name": "Sleepy Game",
    "type": "PROGRAMMING",
    "tags": [
        "dfs and similar",
        "dp",
        "games",
        "graphs"
    ],
    "solvedCount": 3079
}