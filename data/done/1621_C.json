{
    "title": "C. Hidden Permutations",
    "timeLimit": {
        "value": 1.0,
        "unit": "second"
    },
    "memoryLimit": {
        "value": 256.0,
        "unit": "megabytes"
    },
    "statement": "<p><span class=\"tex-font-style-bf\">This is an interactive problem.</span></p><p>The jury has a permutation $$$p$$$ of length $$$n$$$ and wants you to guess it. For this, the jury created another permutation $$$q$$$ of length $$$n$$$. Initially, $$$q$$$ is an identity permutation ($$$q_i = i$$$ for all $$$i$$$).</p><p>You can ask queries to get $$$q_i$$$ for any $$$i$$$ you want. After each query, the jury will change $$$q$$$ in the following way: </p><ul> <li> At first, the jury will create a new permutation $$$q'$$$ of length $$$n$$$ such that $$$q'_i = q_{p_i}$$$ for all $$$i$$$. </li><li> Then the jury will replace permutation $$$q$$$ with pemutation $$$q'$$$. </li></ul><p>You can make no more than $$$2n$$$ queries in order to quess $$$p$$$.</p>",
    "inputSpecification": "<p>The first line of input contains a single integer $$$t$$$ ($$$1 \\leq t \\leq 1000$$$)\u00a0\u2014 the number of test cases.</p>",
    "outputSpecification": null,
    "samples": [
        {
            "input": "\n2\n4\n\n3\n\n2\n\n1\n\n4\n\n2\n\n4\n\n4",
            "output": "\n? 3\n\n? 2\n\n? 4\n\n! 4 2 1 3\n\n? 2\n\n? 3\n\n? 2\n\n! 1 3 4 2"
        }
    ],
    "note": "<p>In the first test case the hidden permutation $$$p = [4, 2, 1, 3]$$$.</p><p>Before the first query $$$q = [1, 2, 3, 4]$$$ so answer for the query will be $$$q_3 = 3$$$.</p><p>Before the second query $$$q = [4, 2, 1, 3]$$$ so answer for the query will be $$$q_2 = 2$$$.</p><p>Before the third query $$$q = [3, 2, 4, 1]$$$ so answer for the query will be $$$q_4 = 1$$$.</p><p>In the second test case the hidden permutation $$$p = [1, 3, 4, 2]$$$.</p><p>Empty strings are given only for better readability. There will be no empty lines in the testing system.</p>",
    "contestId": 1621,
    "index": "C",
    "name": "Hidden Permutations",
    "type": "PROGRAMMING",
    "tags": [
        "dfs and similar",
        "interactive",
        "math"
    ],
    "solvedCount": 6765
}