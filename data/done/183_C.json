{
    "title": "C. Cyclic Coloring",
    "timeLimit": {
        "value": 4.0,
        "unit": "seconds"
    },
    "memoryLimit": {
        "value": 256.0,
        "unit": "megabytes"
    },
    "statement": "<p>You are given a <span class=\"tex-font-style-bf\">directed</span> graph <span class=\"tex-span\"><i>G</i></span> with <span class=\"tex-span\"><i>n</i></span> vertices and <span class=\"tex-span\"><i>m</i></span> arcs (<span class=\"tex-font-style-bf\">multiple arcs and self-loops</span> are allowed). You have to paint each vertex of the graph into one of the <span class=\"tex-span\"><i>k</i></span> <span class=\"tex-span\">(<i>k</i>\u2009\u2264\u2009<i>n</i>)</span> colors in such way that for all arcs of the graph leading from a vertex <span class=\"tex-span\"><i>u</i></span> to vertex <span class=\"tex-span\"><i>v</i></span>, vertex <span class=\"tex-span\"><i>v</i></span> is painted with the <span class=\"tex-font-style-it\">next color</span> of the color used to paint vertex <span class=\"tex-span\"><i>u</i></span>.</p><p>The colors are numbered cyclically <span class=\"tex-span\">1</span> through <span class=\"tex-span\"><i>k</i></span>. This means that for each color <span class=\"tex-span\"><i>i</i></span> <span class=\"tex-span\">(<i>i</i>\u2009&lt;\u2009<i>k</i>)</span> its next color is color <span class=\"tex-span\"><i>i</i>\u2009+\u20091</span>. In addition, the next color of color <span class=\"tex-span\"><i>k</i></span> is color <span class=\"tex-span\">1</span>. Note, that if <span class=\"tex-span\"><i>k</i>\u2009=\u20091</span>, then the next color for color <span class=\"tex-span\">1</span> is again color <span class=\"tex-span\">1</span>.</p><p>Your task is to find and print the largest possible value of <span class=\"tex-span\"><i>k</i></span> <span class=\"tex-span\">(<i>k</i>\u2009\u2264\u2009<i>n</i>)</span> such that it's possible to color <span class=\"tex-span\"><i>G</i></span> as described above with <span class=\"tex-span\"><i>k</i></span> colors. Note that you don't necessarily use all the <span class=\"tex-span\"><i>k</i></span> colors (that is, for each color <span class=\"tex-span\"><i>i</i></span> there does not necessarily exist a vertex that is colored with color <span class=\"tex-span\"><i>i</i></span>).</p>",
    "inputSpecification": "<p>The first line contains two space-separated integers <span class=\"tex-span\"><i>n</i></span> and <span class=\"tex-span\"><i>m</i></span> (<span class=\"tex-span\">1\u2009\u2264\u2009<i>n</i>,\u2009<i>m</i>\u2009\u2264\u200910<sup class=\"upper-index\">5</sup></span>), denoting the number of vertices and the number of arcs of the given digraph, respectively.</p><p>Then <span class=\"tex-span\"><i>m</i></span> lines follow, each line will contain two space-separated integers <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i></sub></span> and <span class=\"tex-span\"><i>b</i><sub class=\"lower-index\"><i>i</i></sub></span> (<span class=\"tex-span\">1\u2009\u2264\u2009<i>a</i><sub class=\"lower-index\"><i>i</i></sub>,\u2009<i>b</i><sub class=\"lower-index\"><i>i</i></sub>\u2009\u2264\u2009<i>n</i></span>), which means that the <span class=\"tex-span\"><i>i</i></span>-th arc goes from vertex <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i></sub></span> to vertex <span class=\"tex-span\"><i>b</i><sub class=\"lower-index\"><i>i</i></sub></span>.</p><p>Multiple arcs and self-loops are allowed.</p>",
    "outputSpecification": "<p>Print a single integer \u2014 the maximum possible number of the colors that can be used to paint the digraph (i.e. <span class=\"tex-span\"><i>k</i></span>, as described in the problem statement). Note that the desired value of <span class=\"tex-span\"><i>k</i></span> must satisfy the inequality <span class=\"tex-span\">1\u2009\u2264\u2009<i>k</i>\u2009\u2264\u2009<i>n</i></span>.</p>",
    "samples": [
        {
            "input": "4 4<br/>1 2<br/>2 1<br/>3 4<br/>4 3<br/>",
            "output": "2<br/>"
        },
        {
            "input": "5 2<br/>1 4<br/>2 5<br/>",
            "output": "5<br/>"
        },
        {
            "input": "4 5<br/>1 2<br/>2 3<br/>3 1<br/>2 4<br/>4 1<br/>",
            "output": "3<br/>"
        },
        {
            "input": "4 4<br/>1 1<br/>1 2<br/>2 1<br/>1 2<br/>",
            "output": "1<br/>"
        }
    ],
    "note": "<p>For the first example, with <span class=\"tex-span\"><i>k</i>\u2009=\u20092</span>, this picture depicts the two colors (arrows denote the next color of that color).</p><center> <img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/34ea8e8212777c6b89bed761086ce2a97dba8576.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/> </center><p>With <span class=\"tex-span\"><i>k</i>\u2009=\u20092</span> a possible way to paint the graph is as follows.</p><center> <img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/02ce4843920f903660754cc5b3fdb89f1037f1aa.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/> </center><p>It can be proven that no larger value for <span class=\"tex-span\"><i>k</i></span> exists for this test case.</p><p>For the second example, here's the picture of the <span class=\"tex-span\"><i>k</i>\u2009=\u20095</span> colors.</p><center> <img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/5a749aaa69dca97ee98157c4d253d2e07102b601.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/> </center><p>A possible coloring of the graph is:</p><center> <img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/ed528e8cfb41759038cbe48190a60aff8bdc414a.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/> </center><p>For the third example, here's the picture of the <span class=\"tex-span\"><i>k</i>\u2009=\u20093</span> colors.</p><center> <img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/d4a577febd0790157c62755bbe94b47ec6dc7da8.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/> </center><p>A possible coloring of the graph is:</p><center> <img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/af9947ca6a702ebeb178ede9fbf4af632836a8a2.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/> </center>",
    "contestId": 183,
    "index": "C",
    "name": "Cyclic Coloring",
    "type": "PROGRAMMING",
    "tags": [
        "dfs and similar"
    ],
    "solvedCount": 599
}