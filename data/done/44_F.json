{
    "title": "F. BerPaint",
    "timeLimit": {
        "value": 5.0,
        "unit": "seconds"
    },
    "memoryLimit": {
        "value": 256.0,
        "unit": "megabytes"
    },
    "statement": "<p>Anfisa the monkey got disappointed in word processors as they aren't good enough at reflecting all the range of her emotions, that's why she decided to switch to graphics editors. Having opened the BerPaint, she saw a white rectangle <span class=\"tex-span\"><i>W</i>\u2009\u00d7\u2009<i>H</i></span> in size which can be painted on. First Anfisa learnt to navigate the drawing tool which is used to paint segments and quickly painted on that rectangle a certain number of black-colored segments. The resulting picture didn't seem bright enough to Anfisa, that's why she turned her attention to the \"fill\" tool which is used to find a point on the rectangle to paint and choose a color, after which all the area which is the same color as the point it contains, is completely painted the chosen color. Having applied the fill several times, Anfisa expressed her emotions completely and stopped painting. Your task is by the information on the painted segments and applied fills to find out for every color the total area of the areas painted this color after all the fills.</p>",
    "inputSpecification": "<p>The first input line has two integers <span class=\"tex-span\"><i>W</i></span> and <span class=\"tex-span\"><i>H</i></span> (<span class=\"tex-span\">3\u2009\u2264\u2009<i>W</i>,\u2009<i>H</i>\u2009\u2264\u200910<sup class=\"upper-index\">4</sup></span>) \u2014 the sizes of the initially white rectangular painting area. The second line contains integer <span class=\"tex-span\"><i>n</i></span> \u2014 the number of black segments (<span class=\"tex-span\">0\u2009\u2264\u2009<i>n</i>\u2009\u2264\u2009100</span>). On the next <span class=\"tex-span\"><i>n</i></span> lines are described the segments themselves, each of which is given by coordinates of their endpoints <span class=\"tex-span\"><i>x</i><sub class=\"lower-index\">1</sub>,\u2009<i>y</i><sub class=\"lower-index\">1</sub>,\u2009<i>x</i><sub class=\"lower-index\">2</sub>,\u2009<i>y</i><sub class=\"lower-index\">2</sub></span> (<span class=\"tex-span\">0\u2009&lt;\u2009<i>x</i><sub class=\"lower-index\">1</sub>,\u2009<i>x</i><sub class=\"lower-index\">2</sub>\u2009&lt;\u2009<i>W</i>,\u20090\u2009&lt;\u2009<i>y</i><sub class=\"lower-index\">1</sub>,\u2009<i>y</i><sub class=\"lower-index\">2</sub>\u2009&lt;\u2009<i>H</i></span>). All segments have non-zero length. The next line contains preset number of fills <span class=\"tex-span\"><i>m</i></span> (<span class=\"tex-span\">0\u2009\u2264\u2009<i>m</i>\u2009\u2264\u2009100</span>). Each of the following <span class=\"tex-span\"><i>m</i></span> lines defines the fill operation in the form of \"<span class=\"tex-span\"><i>x</i></span> <span class=\"tex-span\"><i>y</i></span> <span class=\"tex-span\"><i>color</i></span>\", where <span class=\"tex-span\">(<i>x</i>,\u2009<i>y</i>)</span> are the coordinates of the chosen point (<span class=\"tex-span\">0\u2009&lt;\u2009<i>x</i>\u2009&lt;\u2009<i>W</i>,\u20090\u2009&lt;\u2009<i>y</i>\u2009&lt;\u2009<i>H</i></span>), and <span class=\"tex-span\"><i>color</i></span> \u2014 a line of lowercase Latin letters from 1 to 15 symbols in length, determining the color. All coordinates given in the input are integers. Initially the rectangle is \"white\" in color, whereas the segments are drawn \"black\" in color.</p>",
    "outputSpecification": "<p>For every color present in the final picture print on the single line the name of the color and the total area of areas painted that color with an accuracy of <span class=\"tex-span\">10<sup class=\"upper-index\">\u2009-\u20096</sup></span>. Print the colors in any order. </p>",
    "samples": [
        {
            "input": "4 5<br/>6<br/>1 1 1 3<br/>1 3 3 3<br/>3 3 3 1<br/>3 1 1 1<br/>1 3 3 1<br/>1 1 3 3<br/>2<br/>2 1 red<br/>2 2 blue<br/>",
            "output": "blue 0.00000000<br/>white 20.00000000<br/>"
        },
        {
            "input": "5 5<br/>5<br/>1 1 2 2<br/>2 2 4 2<br/>4 2 4 4<br/>4 4 2 4<br/>2 4 2 2<br/>2<br/>3 3 black<br/>3 3 green<br/>",
            "output": "green 4.00000000<br/>white 21.00000000<br/>"
        },
        {
            "input": "7 4<br/>9<br/>1 2 2 3<br/>2 3 3 2<br/>3 2 2 1<br/>2 1 1 2<br/>3 2 4 2<br/>4 2 5 3<br/>5 3 6 2<br/>6 2 5 1<br/>5 1 4 2<br/>2<br/>2 2 black<br/>2 2 red<br/>",
            "output": "red 2.00000000<br/>white 26.00000000<br/>"
        }
    ],
    "note": "<p>Initially the black segments painted by Anfisa can also be painted a color if any of the chosen points lays on the segment. The segments have areas equal to 0. That is why if in the final picture only parts of segments is painted some color, then the area, painted the color is equal to 0.</p>",
    "contestId": 44,
    "index": "F",
    "name": "BerPaint",
    "type": "PROGRAMMING",
    "tags": [
        "geometry",
        "graphs"
    ],
    "solvedCount": 65
}