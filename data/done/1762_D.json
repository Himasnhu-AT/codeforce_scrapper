{
    "title": "D. GCD Queries ",
    "timeLimit": {
        "value": 3.0,
        "unit": "seconds"
    },
    "memoryLimit": {
        "value": 256.0,
        "unit": "megabytes"
    },
    "statement": "<p><span class=\"tex-font-style-it\">This is an interactive problem.</span></p><p>There is a secret permutation $$$p$$$ of $$$[0,1,2,\\ldots,n-1]$$$. Your task is to find $$$2$$$ indices $$$x$$$ and $$$y$$$ ($$$1 \\leq x, y \\leq n$$$, possibly $$$x=y$$$) such that $$$p_x=0$$$ or $$$p_y=0$$$. In order to find it, you are allowed to ask <span class=\"tex-font-style-bf\">at most</span> $$$2n$$$ queries.</p><p>In one query, you give two integers $$$i$$$ and $$$j$$$ ($$$1 \\leq i, j \\leq n$$$, $$$i \\neq j$$$) and receive the value of $$$\\gcd(p_i,p_j)^\\dagger$$$.</p><p>Note that the permutation $$$p$$$ is fixed <span class=\"tex-font-style-bf\">before</span> any queries are made and does not depend on the queries.</p><p>$$$^\\dagger$$$ $$$\\gcd(x, y)$$$ denotes the <a href=\"https://en.wikipedia.org/wiki/Greatest_common_divisor\">greatest\u00a0common divisor (GCD)</a> of integers $$$x$$$ and $$$y$$$. Note that $$$\\gcd(x,0)=\\gcd(0,x)=x$$$ for all positive integers $$$x$$$.</p>",
    "inputSpecification": "<p>Each test contains multiple test cases. The first line contains the number of test cases $$$t$$$ ($$$1 \\leq t \\leq 10^4$$$). The description of the test cases follows.</p><p>The first line of each test case contains a single integer $$$n$$$ ($$$2 \\leq n \\leq 2 \\cdot 10^4$$$).</p><p>After reading the integer $$$n$$$ for each test case, you should begin the interaction.</p><p>It is guaranteed that the sum of $$$n$$$ over all test cases does not exceed $$$2 \\cdot 10^4$$$.</p>",
    "outputSpecification": null,
    "samples": [
        {
            "input": "\n2\n2\n\n1\n\n1\n5\n\n2\n\n4\n\n1\n",
            "output": "\n\n\n? 1 2\n\n! 1 2\n\n\n? 1 2\n\n? 2 3\n\n! 3 3\n\n"
        }
    ],
    "note": "<p>In the first test, the interaction proceeds as follows.</p><center> <table class=\"tex-tabular\"><tbody><tr><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">Solution</td><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">Jury</td><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">Explanation</td></tr><tr><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\"></td><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">$$$\\texttt{2}$$$</td><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">There are 2 test cases.</td></tr><tr><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\"></td><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">$$$\\texttt{2}$$$</td><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">In the first test case, the hidden permutation is $$$[1,0]$$$, with length $$$2$$$.</td></tr><tr><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">$$$\\texttt{? 1 2}$$$</td><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">$$$\\texttt{1}$$$</td><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">The solution requests $$$\\gcd(p_1,p_2)$$$, and the jury responds with $$$1$$$.</td></tr><tr><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">$$$\\texttt{! 1 2}$$$</td><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">$$$\\texttt{1}$$$</td><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">The solution knows that either $$$p_1=0$$$ or $$$p_2=0$$$, and prints the answer. Since the output is correct, the jury responds with $$$1$$$ and continues to the next test case.</td></tr><tr><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\"></td><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">$$$\\texttt{5}$$$</td><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">In the second test case, the hidden permutation is $$$[2,4,0,1,3]$$$, with length $$$5$$$.</td></tr><tr><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">$$$\\texttt{? 1 2}$$$</td><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">$$$\\texttt{2}$$$</td><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">The solution requests $$$\\gcd(p_1,p_2)$$$, and the jury responds with $$$2$$$.</td></tr><tr><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">$$$\\texttt{? 2 3}$$$</td><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">$$$\\texttt{4}$$$</td><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">The solution requests $$$\\gcd(p_2,p_3)$$$, and the jury responds with $$$4$$$.</td></tr><tr><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">$$$\\texttt{! 3 3}$$$</td><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">$$$\\texttt{1}$$$</td><td class=\"tex-tabular-border-left tex-tabular-text-align-center tex-tabular-border-right tex-tabular-border-top tex-tabular-border-bottom\">The solution has somehow determined that $$$p_3=0$$$, and prints the answer. Since the output is correct, the jury responds with $$$1$$$.</td></tr></tbody></table> </center><p>Note that the empty lines in the example input and output are for the sake of clarity, and do not occur in the real interaction.</p><p><span class=\"tex-font-style-bf\">After each test case, make sure to read $$$1$$$ or $$$-1$$$</span>.</p>",
    "contestId": 1762,
    "index": "D",
    "name": "GCD Queries ",
    "type": "PROGRAMMING",
    "tags": [
        "constructive algorithms",
        "interactive",
        "number theory"
    ],
    "solvedCount": 3328
}