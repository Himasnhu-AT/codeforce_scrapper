{
    "title": "A. The Two Routes",
    "timeLimit": {
        "value": 2.0,
        "unit": "seconds"
    },
    "memoryLimit": {
        "value": 256.0,
        "unit": "megabytes"
    },
    "statement": "<p>In Absurdistan, there are <span class=\"tex-span\"><i>n</i></span> towns (numbered <span class=\"tex-span\">1</span> through <span class=\"tex-span\"><i>n</i></span>) and <span class=\"tex-span\"><i>m</i></span> bidirectional railways. There is also an absurdly simple road network\u00a0\u2014 for each pair of different towns <span class=\"tex-span\"><i>x</i></span> and <span class=\"tex-span\"><i>y</i></span>, there is a bidirectional road between towns <span class=\"tex-span\"><i>x</i></span> and <span class=\"tex-span\"><i>y</i></span> <span class=\"tex-font-style-bf\">if and only if</span> there is no railway between them. Travelling to a different town using one railway or one road always takes exactly one hour.</p><p>A train and a bus leave town <span class=\"tex-span\">1</span> at the same time. They both have the same destination, town <span class=\"tex-span\"><i>n</i></span>, and don't make any stops on the way (but they can wait in town <span class=\"tex-span\"><i>n</i></span>). The train can move only along railways and the bus can move only along roads.</p><p>You've been asked to plan out routes for the vehicles; each route can use any road/railway multiple times. One of the most important aspects to consider is safety\u00a0\u2014 in order to avoid accidents at railway crossings, the train and the bus must not arrive at the same town (except town <span class=\"tex-span\"><i>n</i></span>) simultaneously.</p><p>Under these constraints, what is the minimum number of hours needed for both vehicles to reach town <span class=\"tex-span\"><i>n</i></span> (the maximum of arrival times of the bus and the train)? Note, that bus and train are not required to arrive to the town <span class=\"tex-span\"><i>n</i></span> at the same moment of time, but are allowed to do so.</p>",
    "inputSpecification": "<p>The first line of the input contains two integers <span class=\"tex-span\"><i>n</i></span> and <span class=\"tex-span\"><i>m</i></span> (<span class=\"tex-span\">2\u2009\u2264\u2009<i>n</i>\u2009\u2264\u2009400</span>, <span class=\"tex-span\">0\u2009\u2264\u2009<i>m</i>\u2009\u2264\u2009<i>n</i>(<i>n</i>\u2009-\u20091)\u2009/\u20092</span>)\u00a0\u2014 the number of towns and the number of railways respectively.</p><p>Each of the next <span class=\"tex-span\"><i>m</i></span> lines contains two integers <span class=\"tex-span\"><i>u</i></span> and <span class=\"tex-span\"><i>v</i></span>, denoting a railway between towns <span class=\"tex-span\"><i>u</i></span> and <span class=\"tex-span\"><i>v</i></span> (<span class=\"tex-span\">1\u2009\u2264\u2009<i>u</i>,\u2009<i>v</i>\u2009\u2264\u2009<i>n</i></span>, <span class=\"tex-span\"><i>u</i>\u2009\u2260\u2009<i>v</i></span>).</p><p>You may assume that there is at most one railway connecting any two towns.</p>",
    "outputSpecification": "<p>Output one integer\u00a0\u2014 the smallest possible time of the later vehicle's arrival in town <span class=\"tex-span\"><i>n</i></span>. If it's impossible for at least one of the vehicles to reach town <span class=\"tex-span\"><i>n</i></span>, output <span class=\"tex-span\">\u2009-\u20091</span>.</p>",
    "samples": [
        {
            "input": "4 2<br/>1 3<br/>3 4<br/>",
            "output": "2<br/>"
        },
        {
            "input": "4 6<br/>1 2<br/>1 3<br/>1 4<br/>2 3<br/>2 4<br/>3 4<br/>",
            "output": "-1<br/>"
        },
        {
            "input": "5 5<br/>4 2<br/>3 5<br/>4 5<br/>5 1<br/>1 2<br/>",
            "output": "3<br/>"
        }
    ],
    "note": "<p>In the first sample, the train can take the route <img align=\"middle\" class=\"tex-formula\" src=\"https://espresso.codeforces.com/7c0aa60a06309ef607b7159fd7f3687ea0d943ce.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/> and the bus can take the route <img align=\"middle\" class=\"tex-formula\" src=\"https://espresso.codeforces.com/a26c2f3e93c9d9be6c21cb5d2bd6ac1f99f4ff55.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/>. Note that they can arrive at town <span class=\"tex-span\">4</span> at the same time.</p><p>In the second sample, Absurdistan is ruled by railwaymen. There are no roads, so there's no way for the bus to reach town <span class=\"tex-span\">4</span>.</p>",
    "contestId": 601,
    "index": "A",
    "name": "The Two Routes",
    "type": "PROGRAMMING",
    "tags": [
        "graphs",
        "shortest paths"
    ],
    "solvedCount": 11549
}