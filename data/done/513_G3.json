{
    "title": "G3. Inversions problem",
    "timeLimit": {
        "value": 2.0,
        "unit": "seconds"
    },
    "memoryLimit": {
        "value": 256.0,
        "unit": "megabytes"
    },
    "statement": "<p>You are given a permutation of <span class=\"tex-span\"><i>n</i></span> numbers <span class=\"tex-span\"><i>p</i><sub class=\"lower-index\">1</sub>,\u2009<i>p</i><sub class=\"lower-index\">2</sub>,\u2009...,\u2009<i>p</i><sub class=\"lower-index\"><i>n</i></sub></span>. We perform <span class=\"tex-span\"><i>k</i></span> operations of the following type: choose uniformly at random two indices <span class=\"tex-span\"><i>l</i></span> and <span class=\"tex-span\"><i>r</i></span> (<span class=\"tex-span\"><i>l</i>\u2009\u2264\u2009<i>r</i></span>) and reverse the order of the elements <span class=\"tex-span\"><i>p</i><sub class=\"lower-index\"><i>l</i></sub>,\u2009<i>p</i><sub class=\"lower-index\"><i>l</i>\u2009+\u20091</sub>,\u2009...,\u2009<i>p</i><sub class=\"lower-index\"><i>r</i></sub></span>. Your task is to find the expected value of the number of inversions in the resulting permutation.</p>",
    "inputSpecification": "<p>The first line of input contains two integers <span class=\"tex-span\"><i>n</i></span> and <span class=\"tex-span\"><i>k</i></span> (<span class=\"tex-span\">1\u2009\u2264\u2009<i>n</i>\u2009\u2264\u2009100</span>, <span class=\"tex-span\">1\u2009\u2264\u2009<i>k</i>\u2009\u2264\u200910<sup class=\"upper-index\">9</sup></span>). The next line contains <span class=\"tex-span\"><i>n</i></span> integers <span class=\"tex-span\"><i>p</i><sub class=\"lower-index\">1</sub>,\u2009<i>p</i><sub class=\"lower-index\">2</sub>,\u2009...,\u2009<i>p</i><sub class=\"lower-index\"><i>n</i></sub></span> \u2014 the given permutation. All <span class=\"tex-span\"><i>p</i><sub class=\"lower-index\"><i>i</i></sub></span> are different and in range from 1 to <span class=\"tex-span\"><i>n</i></span>.</p><p><span class=\"tex-font-style-it\">The problem consists of three subproblems. The subproblems have different constraints on the input. You will get some score for the correct submission of the subproblem. The description of the subproblems follows.</span></p><ul> <li> In subproblem G1 (<span class=\"tex-span\">3</span> points), the constraints <span class=\"tex-span\">1\u2009\u2264\u2009<i>n</i>\u2009\u2264\u20096</span>, <span class=\"tex-span\">1\u2009\u2264\u2009<i>k</i>\u2009\u2264\u20094</span> will hold. </li><li> In subproblem G2 (<span class=\"tex-span\">5</span> points), the constraints <span class=\"tex-span\">1\u2009\u2264\u2009<i>n</i>\u2009\u2264\u200930</span>, <span class=\"tex-span\">1\u2009\u2264\u2009<i>k</i>\u2009\u2264\u2009200</span> will hold. </li><li> In subproblem G3 (<span class=\"tex-span\">16</span> points), the constraints <span class=\"tex-span\">1\u2009\u2264\u2009<i>n</i>\u2009\u2264\u2009100</span>, <span class=\"tex-span\">1\u2009\u2264\u2009<i>k</i>\u2009\u2264\u200910<sup class=\"upper-index\">9</sup></span> will hold. </li></ul>",
    "outputSpecification": "<p>Output the answer with absolute or relative error no more than <span class=\"tex-span\">1<i>e</i>\u2009-\u20099</span>.</p>",
    "samples": [
        {
            "input": "3 1<br/>1 2 3<br/>",
            "output": "0.833333333333333<br/>"
        },
        {
            "input": "3 4<br/>1 3 2<br/>",
            "output": "1.458333333333334<br/>"
        }
    ],
    "note": "<p>Consider the first sample test. We will randomly pick an interval of the permutation <span class=\"tex-span\">(1,\u20092,\u20093)</span> (which has no inversions) and reverse the order of its elements. With probability <img align=\"middle\" class=\"tex-formula\" src=\"https://espresso.codeforces.com/eb946338365d9781f7d2e9ec692c26702d0ae3a7.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/>, the interval will consist of a single element and the permutation will not be altered. With probability <img align=\"middle\" class=\"tex-formula\" src=\"https://espresso.codeforces.com/a063853bdfd761520e06382373fe270b6078994b.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/> we will inverse the first two elements' order and obtain the permutation <span class=\"tex-span\">(2,\u20091,\u20093)</span> which has one inversion. With the same probability we might pick the interval consisting of the last two elements which will lead to the permutation <span class=\"tex-span\">(1,\u20093,\u20092)</span> with one inversion. Finally, with probability <img align=\"middle\" class=\"tex-formula\" src=\"https://espresso.codeforces.com/a063853bdfd761520e06382373fe270b6078994b.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/> the randomly picked interval will contain all elements, leading to the permutation <span class=\"tex-span\">(3,\u20092,\u20091)</span> with 3 inversions. Hence, the expected number of inversions is equal to <img align=\"middle\" class=\"tex-formula\" src=\"https://espresso.codeforces.com/cc9273ddc69be58e22251bdf070c83670617a9a2.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/>.</p>",
    "contestId": 513,
    "index": "G3",
    "name": "Inversions problem",
    "type": "PROGRAMMING",
    "tags": [
        "dp"
    ],
    "solvedCount": 254
}