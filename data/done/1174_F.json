{
    "title": "F. Ehab and the Big Finale",
    "timeLimit": {
        "value": 2.0,
        "unit": "seconds"
    },
    "memoryLimit": {
        "value": 256.0,
        "unit": "megabytes"
    },
    "statement": "<p><span class=\"tex-font-style-it\">This is an interactive problem.</span></p><p>You're given a tree consisting of $$$n$$$ nodes, rooted at node $$$1$$$. A tree is a connected graph with no cycles.</p><p>We chose a hidden node $$$x$$$. In order to find this node, you can ask queries of two types: </p><ul> <li> <span class=\"tex-font-style-tt\">d</span> $$$u$$$ ($$$1 \\le u \\le n$$$). We will answer with the distance between nodes $$$u$$$ and $$$x$$$. The distance between two nodes is the number of edges in the shortest path between them. </li><li> <span class=\"tex-font-style-tt\">s</span> $$$u$$$ ($$$1 \\le u \\le n$$$). We will answer with the second node on the path from $$$u$$$ to $$$x$$$. However, there's a plot twist. If $$$u$$$ is <span class=\"tex-font-style-bf\">not</span> an ancestor of $$$x$$$, you'll receive \"<span class=\"tex-font-style-tt\">Wrong answer</span>\" verdict! </li></ul><p>Node $$$a$$$ is called an ancestor of node $$$b$$$ if $$$a \\ne b$$$ and the shortest path from node $$$1$$$ to node $$$b$$$ passes through node $$$a$$$. <span class=\"tex-font-style-bf\">Note that in this problem a node is not an ancestor of itself</span>.</p><p>Can you find $$$x$$$ in no more than $$$36$$$ queries? The hidden node is fixed in each test beforehand and does not depend on your queries.</p>",
    "inputSpecification": "<p>The first line contains the integer $$$n$$$ ($$$2 \\le n \\le 2 \\cdot 10^5$$$)\u00a0\u2014 the number of nodes in the tree.</p><p>Each of the next $$$n-1$$$ lines contains two space-separated integers $$$u$$$ and $$$v$$$ ($$$1 \\le u,v \\le n$$$) that mean there's an edge between nodes $$$u$$$ and $$$v$$$. It's guaranteed that the given graph is a tree.</p>",
    "outputSpecification": "<p>To print the answer, print \"<span class=\"tex-font-style-tt\">! x</span>\" (without quotes).</p>",
    "samples": [
        {
            "input": "\n5\n1 2\n1 3\n3 4\n3 5\n3\n5",
            "output": "\nd 2\ns 3\n! 5"
        }
    ],
    "note": "<p>In the first example, the hidden node is node $$$5$$$.</p><center> <img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/df82373949e7262ae040cf63cfed314fe27e1942.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/> </center><p>We first ask about the distance between node $$$x$$$ and node $$$2$$$. The answer is $$$3$$$, so node $$$x$$$ is either $$$4$$$ or $$$5$$$. We then ask about the second node in the path from node $$$3$$$ to node $$$x$$$. Note here that node $$$3$$$ is an ancestor of node $$$5$$$. We receive node $$$5$$$ as the answer. Finally, we report that the hidden node is node $$$5$$$.</p>",
    "contestId": 1174,
    "index": "F",
    "name": "Ehab and the Big Finale",
    "type": "PROGRAMMING",
    "tags": [
        "constructive algorithms",
        "divide and conquer",
        "graphs",
        "implementation",
        "interactive",
        "trees"
    ],
    "solvedCount": 1466
}