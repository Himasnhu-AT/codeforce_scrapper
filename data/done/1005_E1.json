{
    "title": "E1. Median on Segments (Permutations Edition)",
    "timeLimit": {
        "value": 3.0,
        "unit": "seconds"
    },
    "memoryLimit": {
        "value": 256.0,
        "unit": "megabytes"
    },
    "statement": "<p>You are given a permutation $$$p_1, p_2, \\dots, p_n$$$. A permutation of length $$$n$$$ is a sequence such that each integer between $$$1$$$ and $$$n$$$ occurs exactly once in the sequence.</p><p>Find the number of pairs of indices $$$(l, r)$$$ ($$$1 \\le l \\le r \\le n$$$) such that the value of the median of $$$p_l, p_{l+1}, \\dots, p_r$$$ is exactly the given number $$$m$$$.</p><p>The median of a sequence is the value of the element which is in the middle of the sequence after sorting it in non-decreasing order. If the length of the sequence is even, the left of two middle elements is used.</p><p>For example, if $$$a=[4, 2, 7, 5]$$$ then its median is $$$4$$$ since after sorting the sequence, it will look like $$$[2, 4, 5, 7]$$$ and the left of two middle elements is equal to $$$4$$$. The median of $$$[7, 1, 2, 9, 6]$$$ equals $$$6$$$ since after sorting, the value $$$6$$$ will be in the middle of the sequence.</p><p>Write a program to find the number of pairs of indices $$$(l, r)$$$ ($$$1 \\le l \\le r \\le n$$$) such that the value of the median of $$$p_l, p_{l+1}, \\dots, p_r$$$ is exactly the given number $$$m$$$.</p>",
    "inputSpecification": "<p>The first line contains integers $$$n$$$ and $$$m$$$ ($$$1 \\le n \\le 2\\cdot10^5$$$, $$$1 \\le m \\le n$$$) \u2014 the length of the given sequence and the required value of the median.</p><p>The second line contains a permutation $$$p_1, p_2, \\dots, p_n$$$ ($$$1 \\le p_i \\le n$$$). Each integer between $$$1$$$ and $$$n$$$ occurs in $$$p$$$ exactly once.</p>",
    "outputSpecification": "<p>Print the required number.</p>",
    "samples": [
        {
            "input": "5 4<br/>2 4 5 3 1<br/>",
            "output": "4<br/>"
        },
        {
            "input": "5 5<br/>1 2 3 4 5<br/>",
            "output": "1<br/>"
        },
        {
            "input": "15 8<br/>1 15 2 14 3 13 4 8 12 5 11 6 10 7 9<br/>",
            "output": "48<br/>"
        }
    ],
    "note": "<p>In the first example, the suitable pairs of indices are: $$$(1, 3)$$$, $$$(2, 2)$$$, $$$(2, 3)$$$ and $$$(2, 4)$$$.</p>",
    "contestId": 1005,
    "index": "E1",
    "name": "Median on Segments (Permutations Edition)",
    "type": "PROGRAMMING",
    "tags": [
        "sortings"
    ],
    "solvedCount": 3744
}