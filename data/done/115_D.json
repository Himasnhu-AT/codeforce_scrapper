{
    "title": "D. Unambiguous Arithmetic Expression",
    "timeLimit": {
        "value": 2.0,
        "unit": "seconds"
    },
    "memoryLimit": {
        "value": 256.0,
        "unit": "megabytes"
    },
    "statement": "<p>Let's define an <span class=\"tex-font-style-it\">unambiguous arithmetic expression</span> (UAE) as follows. </p><ul> <li> All non-negative integers are UAE's. Integers may have leading zeroes (for example, <span class=\"tex-span\">0000</span> and <span class=\"tex-span\">0010</span> are considered valid integers). </li><li> If <span class=\"tex-span\"><i>X</i></span> and <span class=\"tex-span\"><i>Y</i></span> are two UAE's, then \"<span class=\"tex-span\">(<i>X</i>)\u2009+\u2009(<i>Y</i>)</span>\", \"<span class=\"tex-span\">(<i>X</i>)\u2009-\u2009(<i>Y</i>)</span>\", \"<span class=\"tex-span\">(<i>X</i>)\u2009*\u2009(<i>Y</i>)</span>\", and \"<span class=\"tex-span\">(<i>X</i>)\u2009/\u2009(<i>Y</i>)</span>\" (all without the double quotes) are UAE's. </li><li> If <span class=\"tex-span\"><i>X</i></span> is an UAE, then \"<span class=\"tex-span\">\u2009-\u2009(<i>X</i>)</span>\" and \"<span class=\"tex-span\">\u2009+\u2009(<i>X</i>)</span>\" (both without the double quotes) are UAE's.<p>You are given a string consisting only of digits (\"<span class=\"tex-font-style-tt\">0</span>\" - \"<span class=\"tex-font-style-tt\">9</span>\") and characters \"<span class=\"tex-font-style-tt\">-</span>\", \"<span class=\"tex-font-style-tt\">+</span>\", \"<span class=\"tex-font-style-tt\">*</span>\", and \"<span class=\"tex-font-style-tt\">/</span>\". Your task is to compute the number of different possible unambiguous arithmetic expressions such that if all brackets (characters \"<span class=\"tex-font-style-tt\">(</span>\" and \"<span class=\"tex-font-style-tt\">)</span>\") of that unambiguous arithmetic expression are removed, it becomes the input string. Since the answer may be very large, print it modulo <span class=\"tex-span\">1000003</span> (<span class=\"tex-span\">10<sup class=\"upper-index\">6</sup>\u2009+\u20093</span>).</p></li></ul>",
    "inputSpecification": "<p>The first line is a <span class=\"tex-font-style-underline\">non-empty</span> string consisting of digits ('0'-'9') and characters '-', '+', '*', and/or '/'. Its length will not exceed <span class=\"tex-span\">2000</span>. The line doesn't contain any spaces.</p>",
    "outputSpecification": "<p>Print a single integer representing the number of different unambiguous arithmetic expressions modulo <span class=\"tex-span\">1000003</span> (<span class=\"tex-span\">10<sup class=\"upper-index\">6</sup>\u2009+\u20093</span>) such that if all its brackets are removed, it becomes equal to the input string (character-by-character).</p>",
    "samples": [
        {
            "input": "1+2*3<br/>",
            "output": "2<br/>"
        },
        {
            "input": "03+-30+40<br/>",
            "output": "3<br/>"
        },
        {
            "input": "5//4<br/>",
            "output": "0<br/>"
        },
        {
            "input": "5/0<br/>",
            "output": "1<br/>"
        },
        {
            "input": "1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1<br/>",
            "output": "100728<br/>"
        },
        {
            "input": "<span class=\"tex-span\">((1)\u2009+\u2009(2))\u2009*\u2009(3)</span><br/><span class=\"tex-span\">(1)\u2009+\u2009((2)\u2009*\u2009(3))</span>",
            "output": "<span class=\"tex-span\">(03)\u2009+\u2009((\u2009-\u2009(30))\u2009+\u2009(40))</span><br/><span class=\"tex-span\">(03)\u2009+\u2009(\u2009-\u2009((30)\u2009+\u2009(40)))</span><br/><span class=\"tex-span\">((03)\u2009+\u2009(\u2009-\u2009(30)))\u2009+\u2009(40)</span>"
        }
    ],
    "note": "<p>For the first example, the two possible unambiguous arithmetic expressions are:</p><pre class=\"verbatim\"><span class=\"tex-span\">((1)\u2009+\u2009(2))\u2009*\u2009(3)</span><br/><span class=\"tex-span\">(1)\u2009+\u2009((2)\u2009*\u2009(3))</span></pre><p>For the second example, the three possible unambiguous arithmetic expressions are:</p><pre class=\"verbatim\"><span class=\"tex-span\">(03)\u2009+\u2009((\u2009-\u2009(30))\u2009+\u2009(40))</span><br/><span class=\"tex-span\">(03)\u2009+\u2009(\u2009-\u2009((30)\u2009+\u2009(40)))</span><br/><span class=\"tex-span\">((03)\u2009+\u2009(\u2009-\u2009(30)))\u2009+\u2009(40)</span></pre>",
    "contestId": 115,
    "index": "D",
    "name": "Unambiguous Arithmetic Expression",
    "type": "PROGRAMMING",
    "tags": [
        "dp",
        "expression parsing"
    ],
    "solvedCount": 376
}