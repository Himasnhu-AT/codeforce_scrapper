{
    "title": "C. Bipartite Segments",
    "timeLimit": {
        "value": 2.0,
        "unit": "seconds"
    },
    "memoryLimit": {
        "value": 256.0,
        "unit": "megabytes"
    },
    "statement": "<p>You are given an undirected graph with <span class=\"tex-span\"><i>n</i></span> vertices. There are no edge-simple cycles with the even length in it. In other words, there are no cycles of even length that pass each edge at most once. Let's enumerate vertices from <span class=\"tex-span\">1</span> to <span class=\"tex-span\"><i>n</i></span>. </p><p>You have to answer <span class=\"tex-span\"><i>q</i></span> queries. Each query is described by a segment of vertices <span class=\"tex-span\">[<i>l</i>;\u2009<i>r</i>]</span>, and you have to count the number of its subsegments <span class=\"tex-span\">[<i>x</i>;\u2009<i>y</i>]</span> (<span class=\"tex-span\"><i>l</i>\u2009\u2264\u2009<i>x</i>\u2009\u2264\u2009<i>y</i>\u2009\u2264\u2009<i>r</i></span>), such that if we delete all vertices except the segment of vertices <span class=\"tex-span\">[<i>x</i>;\u2009<i>y</i>]</span> (including <span class=\"tex-span\"><i>x</i></span> and <span class=\"tex-span\"><i>y</i></span>) and edges between them, the resulting graph is bipartite.</p>",
    "inputSpecification": "<p>The first line contains two integers <span class=\"tex-span\"><i>n</i></span> and <span class=\"tex-span\"><i>m</i></span> (<span class=\"tex-span\">1\u2009\u2264\u2009<i>n</i>\u2009\u2264\u20093\u00b710<sup class=\"upper-index\">5</sup></span>, <span class=\"tex-span\">1\u2009\u2264\u2009<i>m</i>\u2009\u2264\u20093\u00b710<sup class=\"upper-index\">5</sup></span>)\u00a0\u2014 the number of vertices and the number of edges in the graph.</p><p>The next <span class=\"tex-span\"><i>m</i></span> lines describe edges in the graph. The <span class=\"tex-span\"><i>i</i></span>-th of these lines contains two integers <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i></sub></span> and <span class=\"tex-span\"><i>b</i><sub class=\"lower-index\"><i>i</i></sub></span> (<span class=\"tex-span\">1\u2009\u2264\u2009<i>a</i><sub class=\"lower-index\"><i>i</i></sub>,\u2009<i>b</i><sub class=\"lower-index\"><i>i</i></sub>\u2009\u2264\u2009<i>n</i></span>; <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i></sub>\u2009\u2260\u2009<i>b</i><sub class=\"lower-index\"><i>i</i></sub></span>), denoting an edge between vertices <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i></sub></span> and <span class=\"tex-span\"><i>b</i><sub class=\"lower-index\"><i>i</i></sub></span>. It is guaranteed that this graph does not contain edge-simple cycles of even length.</p><p>The next line contains a single integer <span class=\"tex-span\"><i>q</i></span> (<span class=\"tex-span\">1\u2009\u2264\u2009<i>q</i>\u2009\u2264\u20093\u00b710<sup class=\"upper-index\">5</sup></span>)\u00a0\u2014 the number of queries.</p><p>The next <span class=\"tex-span\"><i>q</i></span> lines contain queries. The <span class=\"tex-span\"><i>i</i></span>-th of these lines contains two integers <span class=\"tex-span\"><i>l</i><sub class=\"lower-index\"><i>i</i></sub></span> and <span class=\"tex-span\"><i>r</i><sub class=\"lower-index\"><i>i</i></sub></span> (<span class=\"tex-span\">1\u2009\u2264\u2009<i>l</i><sub class=\"lower-index\"><i>i</i></sub>\u2009\u2264\u2009<i>r</i><sub class=\"lower-index\"><i>i</i></sub>\u2009\u2264\u2009<i>n</i></span>)\u00a0\u2014 the query parameters.</p>",
    "outputSpecification": "<p>Print <span class=\"tex-span\"><i>q</i></span> numbers, each in new line: the <span class=\"tex-span\"><i>i</i></span>-th of them should be the number of subsegments <span class=\"tex-span\">[<i>x</i>;\u2009<i>y</i>]</span> (<span class=\"tex-span\"><i>l</i><sub class=\"lower-index\"><i>i</i></sub>\u2009\u2264\u2009<i>x</i>\u2009\u2264\u2009<i>y</i>\u2009\u2264\u2009<i>r</i><sub class=\"lower-index\"><i>i</i></sub></span>), such that the graph that only includes vertices from segment <span class=\"tex-span\">[<i>x</i>;\u2009<i>y</i>]</span> and edges between them is bipartite.</p>",
    "samples": [
        {
            "input": "6 6<br/>1 2<br/>2 3<br/>3 1<br/>4 5<br/>5 6<br/>6 4<br/>3<br/>1 3<br/>4 6<br/>1 6<br/>",
            "output": "5<br/>5<br/>14<br/>"
        },
        {
            "input": "8 9<br/>1 2<br/>2 3<br/>3 1<br/>4 5<br/>5 6<br/>6 7<br/>7 8<br/>8 4<br/>7 2<br/>3<br/>1 8<br/>1 4<br/>3 8<br/>",
            "output": "27<br/>8<br/>19<br/>"
        }
    ],
    "note": "<p>The first example is shown on the picture below:</p><p><img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/01e1d1999228f416613ff64b5d0e0cf984f150b1.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/></p><p>For the first query, all subsegments of <span class=\"tex-span\">[1;\u20093]</span>, except this segment itself, are suitable.</p><p>For the first query, all subsegments of <span class=\"tex-span\">[4;\u20096]</span>, except this segment itself, are suitable.</p><p>For the third query, all subsegments of <span class=\"tex-span\">[1;\u20096]</span> are suitable, except <span class=\"tex-span\">[1;\u20093]</span>, <span class=\"tex-span\">[1;\u20094]</span>, <span class=\"tex-span\">[1;\u20095]</span>, <span class=\"tex-span\">[1;\u20096]</span>, <span class=\"tex-span\">[2;\u20096]</span>, <span class=\"tex-span\">[3;\u20096]</span>, <span class=\"tex-span\">[4;\u20096]</span>.</p><p>The second example is shown on the picture below:</p><p><img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/09b9227070585b8d5a7dff3cbc5f8535c260a595.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/></p>",
    "contestId": 901,
    "index": "C",
    "name": "Bipartite Segments",
    "type": "PROGRAMMING",
    "tags": [
        "binary search",
        "data structures",
        "dfs and similar",
        "dsu",
        "graphs",
        "two pointers"
    ],
    "solvedCount": 1135
}