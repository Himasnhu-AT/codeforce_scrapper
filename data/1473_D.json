{
    "title": "D. Program",
    "timeLimit": {
        "value": 2.0,
        "unit": "seconds"
    },
    "memoryLimit": {
        "value": 256.0,
        "unit": "megabytes"
    },
    "statement": "<p>You are given a program that consists of $$$n$$$ instructions. Initially a single variable $$$x$$$ is assigned to $$$0$$$. Afterwards, the instructions are of two types: </p><ul> <li> increase $$$x$$$ by $$$1$$$; </li><li> decrease $$$x$$$ by $$$1$$$. </li></ul><p>You are given $$$m$$$ queries of the following format: </p><ul> <li> query $$$l$$$ $$$r$$$\u00a0\u2014 how many distinct values is $$$x$$$ assigned to if all the instructions between the $$$l$$$-th one and the $$$r$$$-th one inclusive are ignored and the rest are executed without changing the order? </li></ul>",
    "inputSpecification": "<p>The first line contains a single integer $$$t$$$ ($$$1 \\le t \\le 1000$$$)\u00a0\u2014 the number of testcases.</p><p>Then the description of $$$t$$$ testcases follows.</p><p>The first line of each testcase contains two integers $$$n$$$ and $$$m$$$ ($$$1 \\le n, m \\le 2 \\cdot 10^5$$$)\u00a0\u2014 the number of instructions in the program and the number of queries.</p><p>The second line of each testcase contains a program\u00a0\u2014 a string of $$$n$$$ characters: each character is either '<span class=\"tex-font-style-tt\">+</span>' or '<span class=\"tex-font-style-tt\">-</span>'\u00a0\u2014 increment and decrement instruction, respectively.</p><p>Each of the next $$$m$$$ lines contains two integers $$$l$$$ and $$$r$$$ ($$$1 \\le l \\le r \\le n$$$)\u00a0\u2014 the description of the query.</p><p>The sum of $$$n$$$ over all testcases doesn't exceed $$$2 \\cdot 10^5$$$. The sum of $$$m$$$ over all testcases doesn't exceed $$$2 \\cdot 10^5$$$. </p>",
    "outputSpecification": "<p>For each testcase print $$$m$$$ integers\u00a0\u2014 for each query $$$l$$$, $$$r$$$ print the number of distinct values variable $$$x$$$ is assigned to if all the instructions between the $$$l$$$-th one and the $$$r$$$-th one inclusive are ignored and the rest are executed without changing the order.</p>",
    "samples": [
        {
            "input": "\n2\n8 4\n-+--+--+\n1 8\n2 8\n2 5\n1 1\n4 10\n+-++\n1 1\n1 2\n2 2\n1 3\n2 3\n3 3\n1 4\n2 4\n3 4\n4 4\n",
            "output": "\n1\n2\n4\n4\n3\n3\n4\n2\n3\n2\n1\n2\n2\n2\n"
        }
    ],
    "note": "<p>The instructions that remain for each query of the first testcase are: </p><ol> <li> empty program\u00a0\u2014 $$$x$$$ was only equal to $$$0$$$; </li><li> \"<span class=\"tex-font-style-tt\">-</span>\"\u00a0\u2014 $$$x$$$ had values $$$0$$$ and $$$-1$$$; </li><li> \"<span class=\"tex-font-style-tt\">---+</span>\"\u00a0\u2014 $$$x$$$ had values $$$0$$$, $$$-1$$$, $$$-2$$$, $$$-3$$$, $$$-2$$$\u00a0\u2014 there are $$$4$$$ distinct values among them; </li><li> \"<span class=\"tex-font-style-tt\">+--+--+</span>\"\u00a0\u2014 the distinct values are $$$1$$$, $$$0$$$, $$$-1$$$, $$$-2$$$. </li></ol>",
    "contestId": 1473,
    "index": "D",
    "name": "Program",
    "type": "PROGRAMMING",
    "tags": [
        "data structures",
        "dp",
        "implementation",
        "strings"
    ],
    "solvedCount": 9371
}