{
    "title": "K. Kim's Quest",
    "timeLimit": {
        "value": 3.0,
        "unit": "seconds"
    },
    "memoryLimit": {
        "value": 1024.0,
        "unit": "megabytes"
    },
    "statement": "<p>In the long-forgotten halls of Kombinatoria's ancient academy, a gifted mathematician named Kim is faced with an unusual challenge. They found an old sequence of integers, which is believed to be a cryptic message from the legendary Kombinatoria's Oracle, and Kim wants to decipher its hidden meaning.</p><p>Kim's mission is to find specific patterns within the sequence, known as <span class=\"tex-font-style-underline\">Harmonious Subsequences</span>. These are extraordinary subsequences where the sum of every three consecutive numbers is even, and each subsequence must be at least three numbers in length. </p><p>Given a sequence $$$a_i$$$ ($$$1 \\le i \\le n$$$) of length $$$n$$$, its <span class=\"tex-font-style-underline\">subsequence</span> of length $$$m$$$ is equal to $$$a_{b_1}, a_{b_2}, \\ldots, a_{b_m}$$$ and is uniquely defined by a set of $$$m$$$ indices $$$b_j$$$, such that $$$1 \\le b_1 &lt; b_2 &lt; \\ldots &lt; b_m \\le n$$$. Subsequences given by different sets of indices $$$b_j$$$ are considered different.</p><p>There's a twist in Kim's quest: the number of these Harmonious Subsequences could be overwhelming. To report the findings effectively, Kim must calculate the total number of these subsequences, presenting the answer as a remainder after dividing by the number $$$998\\,244\\,353$$$.</p>",
    "inputSpecification": "<p>The first line contains a single integer $$$n$$$\u00a0\u2014 the length of the sequence ($$$3 \\le n \\le 2 \\cdot 10^5$$$).</p><p>The second line contains $$$n$$$ space-separated integers $$$a_i$$$\u00a0\u2014 the elements of the sequence ($$$1 \\le a_i \\le 2 \\cdot 10^5$$$).</p>",
    "outputSpecification": "<p>Output one number\u00a0\u2014 the number of Harmonious Subsequences, modulo $$$998\\,244\\,353$$$.</p>",
    "samples": [
        {
            "input": "\n<div class=\"test-example-line test-example-line-even test-example-line-0\">3</div><div class=\"test-example-line test-example-line-even test-example-line-0\">1 2 3</div>",
            "output": "\n1\n"
        },
        {
            "input": "\n<div class=\"test-example-line test-example-line-even test-example-line-0\">5</div><div class=\"test-example-line test-example-line-even test-example-line-0\">2 8 2 6 4</div>",
            "output": "\n16\n"
        },
        {
            "input": "\n<div class=\"test-example-line test-example-line-even test-example-line-0\">5</div><div class=\"test-example-line test-example-line-even test-example-line-0\">5 7 1 3 5</div>",
            "output": "\n0\n"
        },
        {
            "input": "\n<div class=\"test-example-line test-example-line-even test-example-line-0\">11</div><div class=\"test-example-line test-example-line-even test-example-line-0\">3 1 4 1 5 9 2 6 5 3 6</div>",
            "output": "\n386\n"
        },
        {
            "input": "\n54\n2 1 1 1 1 2 1 2 2 2 2 1 1 1 2 1 1 2\n2 1 2 2 2 2 2 2 2 1 1 1 2 2 1 1 1 1\n2 2 1 1 2 2 2 2 2 1 1 1 2 2 1 2 1 1\n",
            "output": "\n0\n"
        }
    ],
    "note": "<p>In the provided input data for the fifth sample, the sequence of numbers is split into three separate lines for clarity, but it should be understood that in the actual test data, the sequence is given in one line. The actual number of Harmonious Subsequences in this example is $$$4\\,991\\,221\\,765 = 5 \\times 998\\,244\\,353$$$, hence the output is zero as a result of finding its remainder after dividing by the number $$$998\\,244\\,353$$$.</p>",
    "contestId": 1912,
    "index": "K",
    "name": "Kim's Quest",
    "type": "PROGRAMMING",
    "tags": [
        "bitmasks",
        "combinatorics",
        "dp"
    ],
    "solvedCount": 2130
}