{
    "title": "H. Hard Optimization",
    "timeLimit": {
        "value": 3.0,
        "unit": "seconds"
    },
    "memoryLimit": {
        "value": 512.0,
        "unit": "megabytes"
    },
    "statement": "<p>You are given a set of $$$n$$$ segments on a line $$$[L_i; R_i]$$$. All $$$2n$$$ segment endpoints are pairwise distinct integers.</p><p>The set is <span class=\"tex-font-style-underline\">laminar</span>\u00a0\u2014 any two segments are either disjoint or one of them contains the other.</p><p>Choose a non-empty subsegment $$$[l_i, r_i]$$$ with integer endpoints in each segment ($$$L_i \\le l_i &lt; r_i \\le R_i$$$) in such a way that no two subsegments intersect (they are allowed to have common endpoints though) and the sum of their lengths ($$$\\sum_{i=1}^n r_i - l_i$$$) is maximized.</p>",
    "inputSpecification": "<p>The first line contains a single integer $$$n$$$ ($$$1 \\le n \\le 2 \\cdot 10^3$$$)\u00a0\u2014 the number of segments.</p><p>The $$$i$$$-th of the next $$$n$$$ lines contains two integers $$$L_i$$$ and $$$R_i$$$ ($$$0 \\le L_i &lt; R_i \\le 10^9$$$)\u00a0\u2014 the endpoints of the $$$i$$$-th segment.</p><p>All the given $$$2n$$$ segment endpoints are distinct. The set of segments is laminar.</p>",
    "outputSpecification": "<p>On the first line, output the maximum possible sum of subsegment lengths.</p><p>On the $$$i$$$-th of the next $$$n$$$ lines, output two integers $$$l_i$$$ and $$$r_i$$$ ($$$L_i \\le l_i &lt; r_i \\le R_i$$$), denoting the chosen subsegment of the $$$i$$$-th segment.</p>",
    "samples": [
        {
            "input": "\n4\n1 10\n2 3\n5 9\n6 7\n",
            "output": "\n7\n3 6\n2 3\n7 9\n6 7\n"
        }
    ],
    "note": "<p>The example input and the example output are illustrated below.   <img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/777a7831426b9a3649b4272ba88d878492c03c8f.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/> <img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/872f6adb4f7d0c9212c4372480f143e3b51a9342.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/></p>",
    "contestId": 1510,
    "index": "H",
    "name": "Hard Optimization",
    "type": "PROGRAMMING",
    "tags": [
        "dp"
    ],
    "solvedCount": 98
}